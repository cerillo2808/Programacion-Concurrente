<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simulación de Dispersión de Calor Tarea 1 - Serial: src/controlador.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Simulación de Dispersión de Calor Tarea 1 - Serial
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">controlador.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="plate_8h_source.html">plate.h</a>&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;<a class="el" href="controlador_8h_source.html">controlador.h</a>&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for controlador.c:</div>
<div class="dyncontent">
<div class="center"><img src="controlador_8c__incl.png" border="0" usemap="#asrc_2controlador_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afb2a3be6d1a771a854c61cd7485df23f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controlador_8c.html#afb2a3be6d1a771a854c61cd7485df23f">verificar_argumentos</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:afb2a3be6d1a771a854c61cd7485df23f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifica la validez de los argumentos proporcionados al programa y procesa el archivo indicado.  <a href="controlador_8c.html#afb2a3be6d1a771a854c61cd7485df23f">More...</a><br /></td></tr>
<tr class="separator:afb2a3be6d1a771a854c61cd7485df23f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6695b50f25a274be9f924e0e36fe6e54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controlador_8c.html#a6695b50f25a274be9f924e0e36fe6e54">cambio_temperatura</a> (double *temperaturas, <a class="el" href="structPlate.html">Plate</a> plate)</td></tr>
<tr class="memdesc:a6695b50f25a274be9f924e0e36fe6e54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza la simulación de cambio de temperatura en una placa utilizando el método de diferencias finitas.  <a href="controlador_8c.html#a6695b50f25a274be9f924e0e36fe6e54">More...</a><br /></td></tr>
<tr class="separator:a6695b50f25a274be9f924e0e36fe6e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a0d0aa94aad5063c016ea819b0a83b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controlador_8c.html#ab2a0d0aa94aad5063c016ea819b0a83b">format_time</a> (const time_t seconds, char *text, const size_t capacity)</td></tr>
<tr class="memdesc:ab2a0d0aa94aad5063c016ea819b0a83b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convierte la cantidad dada de <em>segundos</em> a un texto aproximado YYYY/MM/DD hh:mm:ss.  <a href="controlador_8c.html#ab2a0d0aa94aad5063c016ea819b0a83b">More...</a><br /></td></tr>
<tr class="separator:ab2a0d0aa94aad5063c016ea819b0a83b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49c3e53a6aa7ea6d0740f1f916669981"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controlador_8c.html#a49c3e53a6aa7ea6d0740f1f916669981">generar_archivo_binario</a> (const char *nombre_archivo, uint64_t R, uint64_t C, double *temperaturas)</td></tr>
<tr class="memdesc:a49c3e53a6aa7ea6d0740f1f916669981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera un archivo binario con las temperaturas de la placa.  <a href="controlador_8c.html#a49c3e53a6aa7ea6d0740f1f916669981">More...</a><br /></td></tr>
<tr class="separator:a49c3e53a6aa7ea6d0740f1f916669981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50bc449f294b1a41740f21ab868aab3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controlador_8c.html#a50bc449f294b1a41740f21ab868aab3e">generar_archivo_tsv</a> (const char *directorio, const char *nombreArchivo, <a class="el" href="structPlate.html">Plate</a> plate, double tiempoSegundos, int iteraciones)</td></tr>
<tr class="memdesc:a50bc449f294b1a41740f21ab868aab3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera o actualiza un archivo TSV con información de la simulación de la placa.  <a href="controlador_8c.html#a50bc449f294b1a41740f21ab868aab3e">More...</a><br /></td></tr>
<tr class="separator:a50bc449f294b1a41740f21ab868aab3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6695b50f25a274be9f924e0e36fe6e54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6695b50f25a274be9f924e0e36fe6e54">&#9670;&nbsp;</a></span>cambio_temperatura()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cambio_temperatura </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>temperaturas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPlate.html">Plate</a>&#160;</td>
          <td class="paramname"><em>plate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza la simulación de cambio de temperatura en una placa utilizando el método de diferencias finitas. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temperaturas</td><td>Arreglo de temperaturas actuales en la placa </td></tr>
    <tr><td class="paramname">plate</td><td>Estructura que contiene los parámetros de la placa, como dimensiones y constantes de simulación Esta función realiza iteraciones de simulación para calcular el cambio de temperatura en cada punto de la placa, utilizando un método de diferencias finitas. La simulación se repite hasta que el cambio máximo entre las iteraciones es menor que el valor de epsilon especificado en la estructura plate.</td></tr>
  </table>
  </dd>
</dl>
<p>Al finalizar, genera dos archivos de salida:</p><ol type="1">
<li>Un archivo binario con el nombre del archivo original seguido de la cantidad de iteraciones realizadas.</li>
<li>Un archivo .tsv con los resultados de la simulación, incluyendo el tiempo transcurrido y el número de iteraciones.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>No tiene valor de retorno. Los resultados se guardan en los archivos generados. </dd></dl>

</div>
</div>
<a id="ab2a0d0aa94aad5063c016ea819b0a83b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2a0d0aa94aad5063c016ea819b0a83b">&#9670;&nbsp;</a></span>format_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* format_time </td>
          <td>(</td>
          <td class="paramtype">const time_t&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convierte la cantidad dada de <em>segundos</em> a un texto aproximado YYYY/MM/DD hh:mm:ss. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>Cantidad de segundos transcurridos desde cualquier punto en el tiempo, no es necesario que sea desde el 1 de enero de 1970 a las 00:00:00 GMT </td></tr>
    <tr><td class="paramname">text</td><td>Puntero a un búfer de al menos 48 caracteres </td></tr>
    <tr><td class="paramname">capacity</td><td>Capacidad del arreglo apuntado por el búfer, debe ser de 48 o mayor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>El puntero a text </dd></dl>

</div>
</div>
<a id="a49c3e53a6aa7ea6d0740f1f916669981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49c3e53a6aa7ea6d0740f1f916669981">&#9670;&nbsp;</a></span>generar_archivo_binario()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generar_archivo_binario </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nombre_archivo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>temperaturas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera un archivo binario con las temperaturas de la placa. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nombre_archivo</td><td>Nombre del archivo binario a generar </td></tr>
    <tr><td class="paramname">R</td><td>Número de filas de la placa </td></tr>
    <tr><td class="paramname">C</td><td>Número de columnas de la placa </td></tr>
    <tr><td class="paramname">temperaturas</td><td>Arreglo con las temperaturas actuales de la placa</td></tr>
  </table>
  </dd>
</dl>
<p>Esta función crea un archivo binario en el directorio "output" con el nombre proporcionado en <em>nombre_archivo</em>. El archivo contiene las dimensiones de la placa (R y C) y los valores de las temperaturas en la placa.</p>
<p>Si el directorio "output" no existe, se crea antes de generar el archivo binario. Si ocurre algún error al abrir el archivo, la función imprime un mensaje de error y termina la ejecución.</p>
<dl class="section return"><dt>Returns</dt><dd>No tiene valor de retorno. El archivo binario se genera en el sistema de archivos. </dd></dl>

</div>
</div>
<a id="a50bc449f294b1a41740f21ab868aab3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50bc449f294b1a41740f21ab868aab3e">&#9670;&nbsp;</a></span>generar_archivo_tsv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generar_archivo_tsv </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>directorio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>nombreArchivo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPlate.html">Plate</a>&#160;</td>
          <td class="paramname"><em>plate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tiempoSegundos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iteraciones</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera o actualiza un archivo TSV con información de la simulación de la placa. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directorio</td><td>Directorio donde se guardará el archivo TSV </td></tr>
    <tr><td class="paramname">nombreArchivo</td><td>Nombre del archivo TSV a generar o actualizar </td></tr>
    <tr><td class="paramname">plate</td><td>Estructura que contiene los parámetros de la placa, como dimensiones y constantes de simulación </td></tr>
    <tr><td class="paramname">tiempoSegundos</td><td>Tiempo transcurrido durante la simulación en segundos </td></tr>
    <tr><td class="paramname">iteraciones</td><td>Número de iteraciones realizadas durante la simulación</td></tr>
  </table>
  </dd>
</dl>
<p>Esta función abre el archivo TSV especificado en el directorio dado y lo actualiza (o lo crea si no existe) con los resultados de la simulación de la placa. Se guarda el nombre del archivo original, los valores de los parámetros de la placa (delta, alfa, h, epsilon), el número de iteraciones y el tiempo transcurrido, todo en formato tabulado.</p>
<p>Si ocurre un error al abrir el archivo, se imprime un mensaje de error.</p>
<dl class="section return"><dt>Returns</dt><dd>No tiene valor de retorno. El archivo TSV se actualiza con los datos proporcionados. </dd></dl>

</div>
</div>
<a id="afb2a3be6d1a771a854c61cd7485df23f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2a3be6d1a771a854c61cd7485df23f">&#9670;&nbsp;</a></span>verificar_argumentos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int verificar_argumentos </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifica la validez de los argumentos proporcionados al programa y procesa el archivo indicado. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Número de argumentos pasados al programa </td></tr>
    <tr><td class="paramname">argv</td><td>Arreglo de cadenas de caracteres que contiene los argumentos </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Un código de error: 0 si los argumentos son válidos y el archivo se procesa correctamente. 1 si el número de argumentos es incorrecto, si el archivo no se puede abrir o si ocurre un error al crear un plate.</dd></dl>
<p>El programa espera exactamente 2 argumentos:</p><ol type="1">
<li>La dirección del archivo a procesar</li>
<li>La cantidad de hilos a utilizar (por implementar en la tarea 2)</li>
</ol>
<p>La función intenta abrir el archivo especificado y, si tiene éxito, extrae el nombre del trabajo a partir de la ruta del archivo, eliminando la extensión ".txt" si está presente. Luego, lee cada línea del archivo y utiliza la función <code>crear_plate</code> para crear un plate a partir de la línea leída. Si ocurre algún error durante el proceso, se retorna un código de error. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
